{"ast":null,"code":"var _jsxFileName = \"/home/thomas/navebe/front/src/components/message_space/area_message/AreaMessage.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport url from '../../../api/url';\nimport useGlobalStateAddingCard from '../../../hooks/useGlobalStateAddingCard';\nimport './AreaMessage.scss';\n\nconst AreaMessage = props => {\n  const [mails, setMails] = useState([]);\n  const [seeContact, setSeeContact] = useState(null);\n  const [mailSelect, setMailSelect] = useState(null);\n  const [deleted, setDeleted] = useState(false);\n  const {\n    addingCardFinish,\n    addingCard,\n    addingCardState\n  } = useGlobalStateAddingCard();\n  const [mobile, setMobile] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [mailView, setMailView] = useState(false);\n  const [phoneView, setPhoneView] = useState(false);\n  useEffect(() => {\n    fetch(`${url}/mail/find/${props.userId}/${props.modelId}/${props.categoryId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Acces-Control-Allow-Origin': {\n          origin\n        },\n        'authorization': props.token\n      }\n    }).then(res => res.json()).then(res => setMails(res));\n  }, [props.categoryId, props.userId, props.modelId, mailSelect, deleted]);\n  const linkRef = useRef(null);\n  useEffect(() => {\n    if (window.innerWidth < 1280) setMobile(true);\n    console.log(window.innerWidth);\n  }, []);\n\n  const disableSeeMail = () => {\n    setSeeContact(null);\n    setMailSelect(null);\n  };\n\n  const clickMail = (index, mailId) => {\n    if (addingCardState) {\n      addingCardFinish();\n    } else {\n      addingCard();\n    }\n\n    setMailSelect(index);\n    fetch(`${url}/mail/update/${props.userId}/${props.modelId}/${props.categoryId}/${mailId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': `${origin}`,\n        'authorization': props.token\n      },\n      body: JSON.stringify({\n        view: 1\n      })\n    });\n  };\n\n  const deleteMail = mailId => {\n    if (window.confirm('voulez vous supprimer ce model ?')) {\n      fetch(`${url}/mail/delete/${mailId}/${props.userId}/${props.modelId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': `${origin}`,\n          'authorization': props.token\n        }\n      });\n      setDeleted(!deleted);\n\n      if (addingCardState) {\n        addingCardFinish();\n      } else {\n        addingCard();\n      }\n    }\n  };\n\n  const clipboard = e => {\n    linkRef.current.select();\n    document.execCommand('copy'); // This is just personal preference.\n    // I prefer to not show the the whole text area selected.\n\n    e.target.focus();\n    setCopied(true);\n    setTimeout(() => {\n      setCopied(false);\n    }, 2000);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"messageContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"containerTitleCategoryMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"titleMessageOnglet\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, props.categoryName)), Array.isArray(mails) && mailSelect === null && mails.map((mail, index) => {\n    console.log(mail);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, index !== seeContact ? React.createElement(\"div\", {\n      className: mail.view === 1 ? \"littleContentMail\" : \"littleContentMailUnview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"contentDeleteMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      onClick: () => deleteMail(mail.id),\n      src: require('../image/dustbin_icon.png'),\n      alt: \"delete icon\",\n      className: \"deleteIconMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      onClick: () => {\n        clickMail(index, mail.id);\n      },\n      className: \"contentLittleMessageMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"littleMessageMail\",\n      id: `mail${index}${mail.category_id}${mail.id}`,\n      onClick: () => {\n        clickMail(index, mail.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, mail.message)), React.createElement(\"div\", {\n      className: \"contentContactIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"contact icon\",\n      src: require('../image/contactIcon.png'),\n      className: \"contactIcon\",\n      onClick: () => {\n        setSeeContact(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }))) : React.createElement(\"div\", {\n      className: \"littleContentMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, !mailView && React.createElement(React.Fragment, null, React.createElement(\"img\", {\n      alt: \"phone\",\n      id: `mail${index}${mail.category_id}${mail.id}`,\n      onClick: () => {\n        setPhoneView(!phoneView);\n      },\n      src: require('../image/phone_icon.png'),\n      className: \"phoneIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: `mail${index}${mail.category_id}${mail.id}`,\n      onClick: () => {\n        setPhoneView(!phoneView);\n      },\n      className: \"littleMessageMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, mail.phone)), !phoneView && React.createElement(React.Fragment, null, React.createElement(\"img\", {\n      alt: \"mail\",\n      id: `mail${index}${mail.category_id}${mail.id}`,\n      onClick: () => {\n        setMailView(!mailView);\n      },\n      src: require('../image/mail_icon.png'),\n      className: \"mailIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: `mail${index}${mail.category_id}${mail.id}`,\n      onClick: () => {\n        setMailView(!mailView);\n      },\n      className: \"littleMessageMail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, mail.email)), React.createElement(\"div\", {\n      className: \"contentContactIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"back\",\n      src: require('../image/back_icon.png'),\n      className: \"backIcon\",\n      onClick: () => {\n        setSeeContact(null);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }))));\n  }), mails[mailSelect] && mailSelect !== null && React.createElement(\"div\", {\n    className: \"contentMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"littleContentMailNoHover\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, !mailView && React.createElement(React.Fragment, null, React.createElement(\"img\", {\n    alt: \"phone\",\n    onClick: () => {\n      setPhoneView(!phoneView);\n    },\n    src: require('../image/phone_icon.png'),\n    className: \"phoneIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    onClick: () => {\n      setPhoneView(!phoneView);\n    },\n    className: \"littleMessageMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, mails[mailSelect].phone)), !phoneView && React.createElement(React.Fragment, null, React.createElement(\"img\", {\n    alt: \"mail\",\n    onClick: () => {\n      setMailView(!mailView);\n    },\n    src: require('../image/mail_icon.png'),\n    className: \"mailIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    onClick: () => {\n      setMailView(!mailView);\n    },\n    className: \"littleMessageMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, mails[mailSelect].email)), React.createElement(\"div\", {\n    className: \"contentContactIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"back\",\n    src: require('../image/back_icon.png'),\n    className: \"backIcon\",\n    onClick: disableSeeMail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"contentMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"messageMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, mails[mailSelect].message))), mobile && React.createElement(\"div\", {\n    className: \"linkChatMobile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"containerLinkMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, copied && React.createElement(\"p\", {\n    className: \"messageLinkMail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"copi\\xE9\"), React.createElement(\"a\", {\n    rel: \"noopener noreferrer\",\n    href: `http://192.168.43.193:3000/chatbot/w${props.modelId * 48 / 16 + 150}&${props.modelId * 8 / 4 + 150}`,\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"link chatbot\",\n    onClick: clipboard,\n    src: require('../../models_area/card_model/image/link_icon.png'),\n    className: \"linkIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    ref: linkRef,\n    className: \"textLinkMail\",\n    value: `http://192.168.43.193:3000/chatbot/w${props.modelId * 48 / 16 + 150}&${props.modelId * 8 / 4 + 150}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }))));\n};\n\nexport default AreaMessage;","map":{"version":3,"sources":["/home/thomas/navebe/front/src/components/message_space/area_message/AreaMessage.js"],"names":["React","useEffect","useRef","useState","url","useGlobalStateAddingCard","AreaMessage","props","mails","setMails","seeContact","setSeeContact","mailSelect","setMailSelect","deleted","setDeleted","addingCardFinish","addingCard","addingCardState","mobile","setMobile","copied","setCopied","mailView","setMailView","phoneView","setPhoneView","fetch","userId","modelId","categoryId","method","headers","origin","token","then","res","json","linkRef","window","innerWidth","console","log","disableSeeMail","clickMail","index","mailId","body","JSON","stringify","view","deleteMail","confirm","clipboard","e","current","select","document","execCommand","target","focus","setTimeout","categoryName","Array","isArray","map","mail","id","require","category_id","message","phone","email"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport url from '../../../api/url'\nimport useGlobalStateAddingCard from '../../../hooks/useGlobalStateAddingCard';\nimport './AreaMessage.scss'\n\nconst AreaMessage = (props) => {\n    const [mails, setMails] = useState([])\n    const [seeContact, setSeeContact] = useState(null)\n    const [mailSelect, setMailSelect] = useState(null)\n    const [deleted, setDeleted] = useState(false)\n    const {addingCardFinish, addingCard, addingCardState} = useGlobalStateAddingCard()\n    const [mobile, setMobile] = useState(false)\n    const [copied, setCopied] = useState(false)\n    const [mailView, setMailView] = useState(false)\n    const [phoneView, setPhoneView] = useState(false)\n\n    useEffect(() => {\n        fetch(`${url}/mail/find/${props.userId}/${props.modelId}/${props.categoryId}`, {\n            method: 'GET',\n            headers: {\n              'Content-Type' :'application/json',\n              'Acces-Control-Allow-Origin' : {origin},\n              'authorization': props.token }\n        })\n        .then(res => res.json())\n        .then(res => setMails(res))\n    }, [props.categoryId, props.userId, props.modelId, mailSelect, deleted])\n\n    const linkRef = useRef(null);\n\n    useEffect(() => {\n        if(window.innerWidth < 1280) setMobile(true)\n        console.log(window.innerWidth)\n    }, [])\n\n    const disableSeeMail = () => {\n        setSeeContact(null)\n        setMailSelect(null)\n    }\n\n    const clickMail = (index, mailId) => {\n        if(addingCardState){\n            addingCardFinish()\n        } else {\n            addingCard()\n        }\n        setMailSelect(index)\n        fetch(`${url}/mail/update/${props.userId}/${props.modelId}/${props.categoryId}/${mailId}`, {\n            method: 'PUT',\n            headers: {\n              'Content-Type': 'application/json',\n              'Access-Control-Allow-Origin': `${origin}`,\n              'authorization': props.token\n            },\n            body: JSON.stringify({\n                view : 1\n            })\n        })\n    }\n\n    const deleteMail = (mailId) => {\n        if(window.confirm('voulez vous supprimer ce model ?')){\n        fetch(`${url}/mail/delete/${mailId}/${props.userId}/${props.modelId}`, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': `${origin}`,\n                'authorization': props.token\n            }\n        })\n        setDeleted(!deleted)\n        if(addingCardState){\n            addingCardFinish()\n        } else {\n            addingCard()\n        }\n    }\n}\n\n    const clipboard = (e) => {\n        linkRef.current.select();\n        document.execCommand('copy');\n        // This is just personal preference.\n        // I prefer to not show the the whole text area selected.\n        e.target.focus();\n        setCopied(true)\n        setTimeout(() => {\n            setCopied(false)\n        }, 2000)\n    }\n\n    return(\n        <div className=\"messageContainer\">\n            {}\n            <div className=\"containerTitleCategoryMail\">\n                <p className=\"titleMessageOnglet\">{props.categoryName}</p>\n            </div>\n            {Array.isArray(mails) && mailSelect === null &&\n            mails.map((mail, index) => {\n                console.log(mail)\n                return(\n                <div>\n                    {index !== seeContact ?\n                    <div className={mail.view === 1 ? \"littleContentMail\" : \"littleContentMailUnview\"}>\n                        <div className=\"contentDeleteMail\">\n                            <img onClick={() => deleteMail(mail.id)} src={require('../image/dustbin_icon.png')} alt=\"delete icon\" className=\"deleteIconMail\"/>\n                        </div>\n                        <div onClick={() => {clickMail(index, mail.id)}} className=\"contentLittleMessageMail\">\n                            <p className=\"littleMessageMail\" id={`mail${index}${mail.category_id}${mail.id}`} onClick={() => {clickMail(index, mail.id)}}>{mail.message}</p>\n                        </div>\n                        <div className=\"contentContactIcon\">\n                            <img alt=\"contact icon\" src={require('../image/contactIcon.png')} className=\"contactIcon\" onClick={() => {setSeeContact(index)}}/>\n                        </div>\n                    </div>\n                :\n                    <div className=\"littleContentMail\">\n                            {!mailView &&\n                            <>\n                            <img alt=\"phone\" id={`mail${index}${mail.category_id}${mail.id}`} onClick={() => {setPhoneView(!phoneView)}} src={require('../image/phone_icon.png')} className=\"phoneIcon\"/>\n                            <p id={`mail${index}${mail.category_id}${mail.id}`} onClick={() => {setPhoneView(!phoneView)}} className=\"littleMessageMail\">{mail.phone}</p>\n                            </>}\n                            {!phoneView &&\n                            <>\n                            <img alt=\"mail\" id={`mail${index}${mail.category_id}${mail.id}`} onClick={() => {setMailView(!mailView)}} src={require('../image/mail_icon.png')} className=\"mailIcon\"/>\n                            <p id={`mail${index}${mail.category_id}${mail.id}`} onClick={() => {setMailView(!mailView)}} className=\"littleMessageMail\">{mail.email}</p>\n                            </>}\n                            <div className=\"contentContactIcon\">\n                                <img alt=\"back\" src={require('../image/back_icon.png')} className=\"backIcon\" onClick={() => {setSeeContact(null)}}/>\n                            </div>\n                    </div>}\n                </div>\n                )})}\n            {mails[mailSelect] && mailSelect !== null &&\n                <div className=\"contentMail\">\n                    <div className=\"littleContentMailNoHover\">\n                            {!mailView &&\n                            <>\n                            <img alt=\"phone\" onClick={() => {setPhoneView(!phoneView)}} src={require('../image/phone_icon.png')} className=\"phoneIcon\"/>\n                            <p onClick={() => {setPhoneView(!phoneView)}} className=\"littleMessageMail\">{mails[mailSelect].phone}</p>\n                            </>}\n                            {!phoneView &&\n                            <>\n                            <img alt=\"mail\" onClick={() => {setMailView(!mailView)}} src={require('../image/mail_icon.png')} className=\"mailIcon\"/>\n                            <p onClick={() => {setMailView(!mailView)}} className=\"littleMessageMail\">{mails[mailSelect].email}</p>\n                            </>}\n\n                            <div className=\"contentContactIcon\">\n                                <img alt=\"back\" src={require('../image/back_icon.png')} className=\"backIcon\" onClick={disableSeeMail}/>\n                            </div>\n                    </div>\n                    <div className=\"contentMessage\">\n                        <p className=\"messageMail\">{mails[mailSelect].message}</p>\n                    </div>\n                </div>\n            }\n                {mobile &&\n                <div className=\"linkChatMobile\">\n                    <div className=\"containerLinkMail\">\n                        {copied && <p className=\"messageLinkMail\">copi√©</p>}\n                        <a rel=\"noopener noreferrer\" href={`http://192.168.43.193:3000/chatbot/w${props.modelId*48/16+150}&${props.modelId*8/4+150}`} target=\"_blank\">\n                            <img alt=\"link chatbot\" onClick={clipboard} src={require('../../models_area/card_model/image/link_icon.png')} className=\"linkIcon\"/>\n                        </a>\n                        <input ref={linkRef} className=\"textLinkMail\" value={`http://192.168.43.193:3000/chatbot/w${props.modelId*48/16+150}&${props.modelId*8/4+150}`}/>\n                    </div>\n                </div>}\n            </div>\n    )\n}\n\nexport default AreaMessage"]},"metadata":{},"sourceType":"module"}