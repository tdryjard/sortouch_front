{"ast":null,"code":"var _jsxFileName = \"/home/thomas/navebe/front/src/components/creating_area/ListStock/cardList/CardListQuestion/CardListQuestion.js\";\nimport React, { useState, useEffect } from 'react';\nimport './CardListQuestion.css';\nimport url from '../../../../../api/url';\nimport origin from '../../../../../api/origin';\nimport ContentEditable from 'react-contenteditable';\nimport useGlobalState from '../../../../../hooks/useGlobalState';\nimport useGlobalStateAddingCard from '../../../../../hooks/useGlobalStateAddingCard';\n\nconst CardListQuestion = props => {\n  const [contentEditable] = useState(React.createRef());\n  const [inputValue, setInputValue] = useState({\n    html: props.content\n  });\n  const [updating, setUpdating] = useState(false);\n  const {\n    connectClassActive\n  } = useGlobalState();\n  const {\n    addingCard\n  } = useGlobalStateAddingCard();\n  const [userId, setUserId] = useState();\n  const [modelId, setModelId] = useState();\n  const [token, setToken] = useState();\n  useEffect(() => {\n    if (localStorage.getItem('userId')) {\n      setUserId(localStorage.getItem('userId'));\n      setToken(localStorage.getItem('token'));\n    } else {\n      setUserId(sessionStorage.getItem('userId'));\n      setToken(sessionStorage.getItem('token'));\n    }\n\n    setModelId(sessionStorage.getItem('modelId'));\n  }, []);\n\n  const deleteQuestion = async () => {\n    if (window.confirm(`es tu sûrs de vouloir supprimer la question ${props.content} ?`)) {\n      fetch(`${url}/relation/deleteAllRelationQuestion/${props.id}/${userId}/${modelId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Acces-Control-Allow-Origin': {\n            origin\n          },\n          'authorization': token\n        }\n      });\n      fetch(`${url}/question/delete/${props.id}/${userId}/${modelId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Acces-Control-Allow-Origin': {\n            origin\n          },\n          'authorization': token\n        }\n      });\n      addingCard();\n    }\n  };\n\n  const changeInput = event => {\n    setInputValue({\n      html: event.target.value\n    });\n  };\n\n  const updateQuestion = () => {\n    setUpdating(true);\n  };\n\n  const validUpdateQuestion = () => {\n    fetch(`${url}/question/update/${props.id}/${userId}/${modelId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': `${origin}`,\n        'authorization': token\n      },\n      body: JSON.stringify({\n        content: inputValue.html\n      })\n    });\n    addingCard();\n    setUpdating(false);\n  };\n\n  const joinQuestion = () => {\n    connectClassActive();\n\n    try {\n      fetch(`${url}/relation/add`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Acces-Control-Allow-Origin': {\n            origin\n          },\n          'authorization': token\n        },\n        body: JSON.stringify({\n          question_id: props.id,\n          onChange: true,\n          user_id: userId,\n          model_id: modelId\n        })\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  onmousedown = function (event) {\n    props.changeSelected(-1);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"containerCardList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, updating === false ? React.createElement(\"div\", {\n    className: \"contentCardList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"textTitleCard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, props.content), React.createElement(\"div\", {\n    className: \"containerIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"join icon\",\n    onClick: joinQuestion,\n    src: require('../image/join_icon.png'),\n    className: props.selected === props.id ? \"joinIconActive\" : \"joinIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    alt: \"update icon\",\n    onClick: updateQuestion,\n    src: require('../image/update_icon.png'),\n    className: \"updateIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    alt: \"delete icon\",\n    onClick: deleteQuestion,\n    src: require('../image/delete_icon.png'),\n    className: \"deleteIcon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }))) : React.createElement(\"div\", {\n    className: \"contentCardList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(ContentEditable, {\n    className: \"contentQuestionInputCard\",\n    innerRef: contentEditable,\n    html: inputValue.html,\n    disabled: false,\n    onChange: changeInput,\n    tagName: \"article\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: validUpdateQuestion,\n    className: \"validUpdateCard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Valider\")));\n};\n\nexport default CardListQuestion;","map":{"version":3,"sources":["/home/thomas/navebe/front/src/components/creating_area/ListStock/cardList/CardListQuestion/CardListQuestion.js"],"names":["React","useState","useEffect","url","origin","ContentEditable","useGlobalState","useGlobalStateAddingCard","CardListQuestion","props","contentEditable","createRef","inputValue","setInputValue","html","content","updating","setUpdating","connectClassActive","addingCard","userId","setUserId","modelId","setModelId","token","setToken","localStorage","getItem","sessionStorage","deleteQuestion","window","confirm","fetch","id","method","headers","changeInput","event","target","value","updateQuestion","validUpdateQuestion","body","JSON","stringify","joinQuestion","question_id","onChange","user_id","model_id","error","console","log","onmousedown","changeSelected","require","selected"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './CardListQuestion.css'\nimport url from '../../../../../api/url';\nimport origin from '../../../../../api/origin';\nimport ContentEditable from 'react-contenteditable'\nimport useGlobalState from '../../../../../hooks/useGlobalState';\nimport useGlobalStateAddingCard from '../../../../../hooks/useGlobalStateAddingCard';\n\nconst CardListQuestion = (props) => {\n    const [contentEditable] = useState(React.createRef())\n    const [inputValue, setInputValue] = useState({ html: props.content })\n    const [updating, setUpdating] = useState(false)\n    const { connectClassActive } = useGlobalState();\n    const {addingCard} = useGlobalStateAddingCard()\n    const [userId, setUserId] = useState()\n    const [modelId, setModelId] = useState()\n    const [token, setToken] = useState()\n\n    useEffect(() => {\n        if(localStorage.getItem('userId')){\n            setUserId(localStorage.getItem('userId'))\n            setToken(localStorage.getItem('token'))\n        } else {\n            setUserId(sessionStorage.getItem('userId'))\n            setToken(sessionStorage.getItem('token'))\n        }\n        setModelId(sessionStorage.getItem('modelId'))\n    }, [])\n\n\n    const deleteQuestion = async () => {\n        if(window.confirm(`es tu sûrs de vouloir supprimer la question ${props.content} ?`)){\n            fetch(`${url}/relation/deleteAllRelationQuestion/${props.id}/${userId}/${modelId}`, {\n                method: 'DELETE',\n                headers: {\n                  'Content-Type' :'application/json',\n                  'Acces-Control-Allow-Origin' : {origin},\n                  'authorization': token\n                }\n            })\n            fetch(`${url}/question/delete/${props.id}/${userId}/${modelId}`, {\n                method: 'DELETE',\n                headers: {\n                  'Content-Type' :'application/json',\n                  'Acces-Control-Allow-Origin' : {origin},\n                  'authorization': token\n                }\n            })\n            addingCard()\n        }\n    }\n\n    const changeInput = (event) => {\n        setInputValue({ html: event.target.value })\n    }\n\n    const updateQuestion = () => {\n        setUpdating(true)\n    }\n\n    const validUpdateQuestion = () => {\n        fetch(`${url}/question/update/${props.id}/${userId}/${modelId}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': `${origin}`,\n                'authorization': token\n            },\n            body: JSON.stringify({\n                content: inputValue.html\n            })\n        })\n        addingCard()\n        setUpdating(false)\n    }\n\n    const joinQuestion = () => {\n        connectClassActive()\n        try{\n            fetch(`${url}/relation/add`, {\n              method: 'POST',\n              headers: {\n                'Content-Type' :'application/json',\n                'Acces-Control-Allow-Origin' : {origin},\n                'authorization': token\n              },\n              body: JSON.stringify({\n                  question_id : props.id,\n                  onChange : true,\n                  user_id : userId,\n                  model_id: modelId\n              })\n            });\n          } catch (error)  {\n            console.log(error);\n          }\n    }\n\n    onmousedown = function (event) {\n        props.changeSelected(-1)\n    }\n\nreturn (\n    <div className=\"containerCardList\">\n\n        {updating === false ?\n        <div className=\"contentCardList\">\n            <p className=\"textTitleCard\">{props.content}</p>\n            <div className=\"containerIcon\">\n                <img alt=\"join icon\" onClick={joinQuestion} src={require('../image/join_icon.png')} className={props.selected === props.id ? \"joinIconActive\" : \"joinIcon\"} />\n                <img alt=\"update icon\" onClick={updateQuestion} src={require('../image/update_icon.png')} className=\"updateIcon\" />\n                <img alt=\"delete icon\" onClick={deleteQuestion} src={require('../image/delete_icon.png')} className=\"deleteIcon\" />\n            </div>\n        </div>\n        :\n        <div className=\"contentCardList\">\n            <ContentEditable\n                className=\"contentQuestionInputCard\"\n                innerRef={contentEditable}\n                html={inputValue.html}\n                disabled={false}\n                onChange={changeInput}\n                tagName='article'\n            />\n            <button onClick={validUpdateQuestion} className=\"validUpdateCard\">Valider</button>\n        </div>\n        }\n    </div>\n)\n}\n\nexport default CardListQuestion;"]},"metadata":{},"sourceType":"module"}