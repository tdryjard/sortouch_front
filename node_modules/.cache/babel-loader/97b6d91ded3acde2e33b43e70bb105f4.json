{"ast":null,"code":"var _jsxFileName = \"/home/thomas/navebe/front/src/components/data_area/DataArea.js\";\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../navbar/Navbar';\nimport MenuBurger from '../menuBurger/MenuBurger';\nimport url from '../../api/url';\nimport './DataArea.scss';\n\nconst DataArea = () => {\n  const [mails, setMails] = useState();\n  const [userId, setUserId] = useState();\n  const [modelId, setModelId] = useState();\n  const [token, setToken] = useState();\n  const [choiceModel, setChoiceModel] = useState('Tout');\n  const [choiceCategory, setChoiceCategory] = useState('');\n  const [models, setModels] = useState([]);\n  const [selectModel, setSelectModel] = useState(false);\n  con;\n  useEffect(() => {\n    if (localStorage.getItem('userId')) {\n      setUserId(localStorage.getItem('userId'));\n      setToken(localStorage.getItem('token'));\n    } else {\n      setUserId(sessionStorage.getItem('userId'));\n      setToken(sessionStorage.getItem('token'));\n    }\n\n    if (sessionStorage.getItem('modelId')) {\n      setModelId(sessionStorage.getItem('modelId'));\n    }\n  }, []);\n  useEffect(() => {\n    findAll();\n  }, [userId, token, modelId]);\n  console.log(userId);\n\n  const findAll = () => {\n    fetch(`${url}/mail/findByUser/${userId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Acces-Control-Allow-Origin': {\n          origin\n        },\n        'authorization': token\n      }\n    }).then(res => res.json()).then(res => console.log(res));\n  };\n\n  useEffect(() => {\n    fetch(`${url}/model/findAll/${userId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Acces-Control-Allow-Origin': {\n          origin\n        },\n        'authorization': token\n      }\n    }).then(res => res.json()).then(res => setModels(res));\n  }, [userId, token]);\n\n  const modelSelectFunction = name => {\n    console.log(name);\n    setSelectModel(false);\n    setChoiceModel(name);\n  };\n\n  useEffect(() => {\n    fetch(`${url}/category/findAll/${userId}/${modelId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Acces-Control-Allow-Origin': {\n          origin\n        },\n        'authorization': token\n      }\n    }).then(res => res.json()).then(res => {\n      setCategorys(res);\n      if (!categorySelect && res[0]) setCategorySelect(res[0].id);\n    });\n  }, [classConnectButton, addingCardState, userId, modelId]);\n  useEffect(() => {\n    let stockUnview = [];\n    console.log(categorys);\n\n    if (categorys.length) {\n      for (let n = 1; n < categorys.length + 1; n++) {\n        fetch(`${url}/mail/find/${userId}/${modelId}/${n}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Acces-Control-Allow-Origin': {\n              origin\n            },\n            'authorization': token\n          }\n        }).then(res => res.json()).then(res => {\n          console.log(res);\n          let nb = 0;\n\n          for (let i = 0; i < res.length; i++) {\n            if (res[i].view === 0) nb++;\n          }\n\n          stockUnview.push(nb);\n        });\n      }\n\n      setTimeout(() => {\n        setUnview(stockUnview);\n      }, 200);\n    }\n  }, [categorys, userId, modelId]);\n  console.log(models);\n  return React.createElement(\"div\", {\n    className: \"containerModelArea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, window.innerWidth > 1280 ? React.createElement(Navbar, {\n    type: \"data\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }) : React.createElement(MenuBurger, {\n    type: \"models\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"contentDataArea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"headSearchData\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"choiceSearchData\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    onClick: () => {\n      setSelectModel(!selectModel);\n    },\n    className: \"textChoiceDataGet\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, choiceModel)), choiceModel !== 'Tout' && React.createElement(\"div\", {\n    className: \"choiceSearchData\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"textChoiceData\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, choiceModel))), selectModel && React.createElement(\"div\", {\n    className: \"listModelsData\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, models.length && models.map(model => {\n    return React.createElement(\"p\", {\n      className: \"textChoiceData\",\n      onClick: () => {\n        modelSelectFunction(model.name);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, model.name);\n  }))));\n};\n\nexport default DataArea;","map":{"version":3,"sources":["/home/thomas/navebe/front/src/components/data_area/DataArea.js"],"names":["React","useEffect","useState","Navbar","MenuBurger","url","DataArea","mails","setMails","userId","setUserId","modelId","setModelId","token","setToken","choiceModel","setChoiceModel","choiceCategory","setChoiceCategory","models","setModels","selectModel","setSelectModel","con","localStorage","getItem","sessionStorage","findAll","console","log","fetch","method","headers","origin","then","res","json","modelSelectFunction","name","setCategorys","categorySelect","setCategorySelect","id","classConnectButton","addingCardState","stockUnview","categorys","length","n","nb","i","view","push","setTimeout","setUnview","window","innerWidth","map","model"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAO,iBAAP;;AAGA,MAAMC,QAAQ,GAAG,MAAM;AACnB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,EAAlC;AACA,QAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,EAApC;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,EAAtC;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,EAAlC;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,MAAD,CAA9C;AACA,QAAM,CAACe,cAAD,EAAiBC,iBAAjB,IAAsChB,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACiB,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACmB,WAAD,EAAcC,cAAd,IAAgCpB,QAAQ,CAAC,KAAD,CAA9C;AACAqB,EAAAA,GAAG;AAEHtB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIuB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAJ,EAAoC;AAChCf,MAAAA,SAAS,CAACc,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,CAAT;AACAX,MAAAA,QAAQ,CAACU,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAR;AACH,KAHD,MAGO;AACHf,MAAAA,SAAS,CAACgB,cAAc,CAACD,OAAf,CAAuB,QAAvB,CAAD,CAAT;AACAX,MAAAA,QAAQ,CAACY,cAAc,CAACD,OAAf,CAAuB,OAAvB,CAAD,CAAR;AACH;;AACD,QAAIC,cAAc,CAACD,OAAf,CAAuB,SAAvB,CAAJ,EAAuC;AACnCb,MAAAA,UAAU,CAACc,cAAc,CAACD,OAAf,CAAuB,SAAvB,CAAD,CAAV;AACH;AACJ,GAXQ,EAWN,EAXM,CAAT;AAaAxB,EAAAA,SAAS,CAAC,MAAM;AACZ0B,IAAAA,OAAO;AACV,GAFQ,EAEN,CAAClB,MAAD,EAASI,KAAT,EAAgBF,OAAhB,CAFM,CAAT;AAIAiB,EAAAA,OAAO,CAACC,GAAR,CAAYpB,MAAZ;;AAEA,QAAMkB,OAAO,GAAG,MAAM;AAClBG,IAAAA,KAAK,CAAE,GAAEzB,GAAI,oBAAmBI,MAAO,EAAlC,EAAqC;AACtCsB,MAAAA,MAAM,EAAE,KAD8B;AAEtCC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,sCAA8B;AAAEC,UAAAA;AAAF,SAFzB;AAGL,yBAAiBpB;AAHZ;AAF6B,KAArC,CAAL,CAQKqB,IARL,CAQUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARjB,EASKF,IATL,CASUC,GAAG,IAAIP,OAAO,CAACC,GAAR,CAAYM,GAAZ,CATjB;AAUH,GAXD;;AAaAlC,EAAAA,SAAS,CAAC,MAAM;AACZ6B,IAAAA,KAAK,CAAE,GAAEzB,GAAI,kBAAiBI,MAAO,EAAhC,EAAmC;AACpCsB,MAAAA,MAAM,EAAE,KAD4B;AAEpCC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,sCAA8B;AAAEC,UAAAA;AAAF,SAFzB;AAGL,yBAAiBpB;AAHZ;AAF2B,KAAnC,CAAL,CAQKqB,IARL,CAQUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARjB,EASKF,IATL,CASUC,GAAG,IAAIf,SAAS,CAACe,GAAD,CAT1B;AAUH,GAXQ,EAWN,CAAC1B,MAAD,EAASI,KAAT,CAXM,CAAT;;AAaA,QAAMwB,mBAAmB,GAAIC,IAAD,IAAU;AAClCV,IAAAA,OAAO,CAACC,GAAR,CAAYS,IAAZ;AACAhB,IAAAA,cAAc,CAAC,KAAD,CAAd;AACAN,IAAAA,cAAc,CAACsB,IAAD,CAAd;AACH,GAJD;;AAMArC,EAAAA,SAAS,CAAC,MAAM;AACZ6B,IAAAA,KAAK,CAAE,GAAEzB,GAAI,qBAAoBI,MAAO,IAAGE,OAAQ,EAA9C,EAAiD;AAClDoB,MAAAA,MAAM,EAAE,KAD0C;AAElDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,sCAA+B;AAACC,UAAAA;AAAD,SAFxB;AAGP,yBAAiBpB;AAHV;AAFyC,KAAjD,CAAL,CAOCqB,IAPD,CAOMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPb,EAQCF,IARD,CAQMC,GAAG,IAAI;AACTI,MAAAA,YAAY,CAACJ,GAAD,CAAZ;AACA,UAAG,CAACK,cAAD,IAAmBL,GAAG,CAAC,CAAD,CAAzB,EAA8BM,iBAAiB,CAACN,GAAG,CAAC,CAAD,CAAH,CAAOO,EAAR,CAAjB;AACjC,KAXD;AAYH,GAbQ,EAaN,CAACC,kBAAD,EAAqBC,eAArB,EAAsCnC,MAAtC,EAA8CE,OAA9C,CAbM,CAAT;AAeAV,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI4C,WAAW,GAAG,EAAlB;AACAjB,IAAAA,OAAO,CAACC,GAAR,CAAYiB,SAAZ;;AACA,QAAGA,SAAS,CAACC,MAAb,EAAoB;AAChB,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,SAAS,CAACC,MAAV,GAAmB,CAAtC,EAAyCC,CAAC,EAA1C,EAA6C;AACzClB,QAAAA,KAAK,CAAE,GAAEzB,GAAI,cAAaI,MAAO,IAAGE,OAAQ,IAAGqC,CAAE,EAA5C,EAAgD;AACjDjB,UAAAA,MAAM,EAAE,KADyC;AAEjDC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,0CAA+B;AAACC,cAAAA;AAAD,aAFxB;AAGP,6BAAiBpB;AAHV;AAFwC,SAAhD,CAAL,CAOCqB,IAPD,CAOMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPb,EAQCF,IARD,CAQMC,GAAG,IAAI;AACTP,UAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACJ,cAAIc,EAAE,GAAG,CAAT;;AACA,eAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGf,GAAG,CAACY,MAAvB,EAA+BG,CAAC,EAAhC,EAAmC;AAC/B,gBAAGf,GAAG,CAACe,CAAD,CAAH,CAAOC,IAAP,KAAgB,CAAnB,EAAsBF,EAAE;AAC3B;;AACDJ,UAAAA,WAAW,CAACO,IAAZ,CAAiBH,EAAjB;AACH,SAfG;AAgBH;;AACDI,MAAAA,UAAU,CAAC,MAAM;AACbC,QAAAA,SAAS,CAACT,WAAD,CAAT;AACH,OAFS,EAEP,GAFO,CAAV;AAGH;AACJ,GA1BQ,EA0BN,CAACC,SAAD,EAAYrC,MAAZ,EAAoBE,OAApB,CA1BM,CAAT;AA4BAiB,EAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AAEA,SACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKoC,MAAM,CAACC,UAAP,GAAoB,IAApB,GACG,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAE,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,GAGG,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAE,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJR,EAKI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,OAAO,EAAE,MAAM;AAAElC,MAAAA,cAAc,CAAC,CAACD,WAAF,CAAd;AAA8B,KAAlD;AAAoD,IAAA,SAAS,EAAC,mBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmFN,WAAnF,CADJ,CADJ,EAIKA,WAAW,KAAK,MAAhB,IACG;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BA,WAA/B,CADJ,CALR,CADJ,EAUKM,WAAW,IACR;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKF,MAAM,CAAC4B,MAAP,IAAiB5B,MAAM,CAACsC,GAAP,CAAWC,KAAK,IAAI;AAClC,WACI;AAAG,MAAA,SAAS,EAAC,gBAAb;AAA8B,MAAA,OAAO,EAAE,MAAM;AAAErB,QAAAA,mBAAmB,CAACqB,KAAK,CAACpB,IAAP,CAAnB;AAAiC,OAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmFoB,KAAK,CAACpB,IAAzF,CADJ;AAGH,GAJiB,CADtB,CAXR,CALJ,CADJ;AA2BH,CAtID;;AAwIA,eAAehC,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Navbar from '../navbar/Navbar'\nimport MenuBurger from '../menuBurger/MenuBurger'\nimport url from '../../api/url'\nimport './DataArea.scss'\n\n\nconst DataArea = () => {\n    const [mails, setMails] = useState()\n    const [userId, setUserId] = useState()\n    const [modelId, setModelId] = useState()\n    const [token, setToken] = useState()\n    const [choiceModel, setChoiceModel] = useState('Tout')\n    const [choiceCategory, setChoiceCategory] = useState('')\n    const [models, setModels] = useState([])\n    const [selectModel, setSelectModel] = useState(false)\n    con\n\n    useEffect(() => {\n        if (localStorage.getItem('userId')) {\n            setUserId(localStorage.getItem('userId'))\n            setToken(localStorage.getItem('token'))\n        } else {\n            setUserId(sessionStorage.getItem('userId'))\n            setToken(sessionStorage.getItem('token'))\n        }\n        if (sessionStorage.getItem('modelId')) {\n            setModelId(sessionStorage.getItem('modelId'))\n        }\n    }, [])\n\n    useEffect(() => {\n        findAll()\n    }, [userId, token, modelId])\n\n    console.log(userId)\n\n    const findAll = () => {\n        fetch(`${url}/mail/findByUser/${userId}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Acces-Control-Allow-Origin': { origin },\n                'authorization': token\n            }\n        })\n            .then(res => res.json())\n            .then(res => console.log(res))\n    }\n\n    useEffect(() => {\n        fetch(`${url}/model/findAll/${userId}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Acces-Control-Allow-Origin': { origin },\n                'authorization': token\n            }\n        })\n            .then(res => res.json())\n            .then(res => setModels(res))\n    }, [userId, token])\n\n    const modelSelectFunction = (name) => {\n        console.log(name)\n        setSelectModel(false)\n        setChoiceModel(name)\n    }\n\n    useEffect(() => {\n        fetch(`${url}/category/findAll/${userId}/${modelId}`, {\n            method: 'GET',\n            headers: {\n              'Content-Type' :'application/json',\n              'Acces-Control-Allow-Origin' : {origin},\n              'authorization': token }\n        })\n        .then(res => res.json())\n        .then(res => {\n            setCategorys(res)\n            if(!categorySelect && res[0]) setCategorySelect(res[0].id)\n        })\n    }, [classConnectButton, addingCardState, userId, modelId])\n\n    useEffect(() => {\n        let stockUnview = []\n        console.log(categorys)\n        if(categorys.length){\n            for(let n = 1; n < categorys.length + 1; n++){\n                fetch(`${url}/mail/find/${userId}/${modelId}/${n}`,  {\n                    method: 'GET',\n                    headers: {\n                      'Content-Type' :'application/json',\n                      'Acces-Control-Allow-Origin' : {origin},\n                      'authorization': token }\n                })\n                .then(res => res.json())\n                .then(res => {\n                    console.log(res)\n                let nb = 0\n                for(let i = 0; i < res.length; i++){\n                    if(res[i].view === 0) nb++\n                }\n                stockUnview.push(nb)\n            })\n            }\n            setTimeout(() => {\n                setUnview(stockUnview)\n            }, 200)\n        }\n    }, [categorys, userId, modelId])\n\n    console.log(models)\n\n    return (\n        <div className=\"containerModelArea\">\n            {window.innerWidth > 1280 ?\n                <Navbar type={\"data\"} />\n                :\n                <MenuBurger type={\"models\"} />}\n            <div className=\"contentDataArea\">\n                <div className=\"headSearchData\">\n                    <div className=\"choiceSearchData\">\n                        <p onClick={() => { setSelectModel(!selectModel) }} className=\"textChoiceDataGet\">{choiceModel}</p>\n                    </div>\n                    {choiceModel !== 'Tout' &&\n                        <div className=\"choiceSearchData\">\n                            <p className=\"textChoiceData\">{choiceModel}</p>\n                        </div>}\n                </div>\n                {selectModel &&\n                    <div className=\"listModelsData\">\n                        {models.length && models.map(model => {\n                            return (\n                                <p className=\"textChoiceData\" onClick={() => { modelSelectFunction(model.name) }}>{model.name}</p>\n                            )\n                        })}\n                    </div>}\n            </div>\n        </div>\n    )\n}\n\nexport default DataArea"]},"metadata":{},"sourceType":"module"}