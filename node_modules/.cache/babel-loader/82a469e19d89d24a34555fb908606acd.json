{"ast":null,"code":"var _jsxFileName = \"/home/thomas/navebe/front/src/components/registration/connexion/Connexion.js\";\nimport React, { useState } from 'react';\nimport url from '../../../api/url';\nimport { Redirect } from 'react-router-dom';\nimport './Connexion.scss';\n\nconst Connexion = () => {\n  const [mail, setMail] = useState('');\n  const [password, setPassword] = useState('');\n  const [alert, setAlert] = useState('');\n  const [valid, setValid] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n\n  const validSub = async () => {\n    // Envoi de la requête\n    const response = await fetch(`${url}/user/connect`, {\n      method: 'POST',\n      body: JSON.stringify({\n        email: mail,\n        password: password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }); // Récupération du status de la requête\n\n    const result = await response.json();\n    console.log(result);\n\n    if (result.status === 200) {\n      if (valid === true) {\n        localStorage.setItem(\"userId\", result.data.id);\n        localStorage.setItem('token', result.token);\n        setRedirect(true);\n        setTimeout(() => {\n          document.location.reload();\n        }, 100);\n      } else if (valid === false) {\n        sessionStorage.setItem(\"userId\", result.data.id);\n        sessionStorage.setItem('token', result.token);\n        setRedirect(true);\n      }\n    } else {\n      setAlert(\"email ou mot de passe incorrect\");\n      setTimeout(() => {\n        setAlert('');\n      }, 2000);\n    }\n  };\n\n  const takeMail = e => {\n    setMail(e.target.value);\n  };\n\n  const takePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"containerRegistration\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, redirect === true && React.createElement(Redirect, {\n    to: \"/models\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    className: \"titleRegister\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Connexion\"), alert && React.createElement(\"div\", {\n    className: \"contentAlert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"textAlert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, alert)), React.createElement(\"form\", {\n    className: \"subForm\",\n    onSubmit: validSub,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: takeMail,\n    className: alert === \"veuillez entrer une email correct\" ? \"inputLogError\" : \"inputLog\",\n    placeholder: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    onChange: takePassword,\n    className: alert === \"veuillez entrer une email correct\" || alert === \"\" ? \"inputLog\" : \"inputLogError\",\n    placeholder: \"mot de passe\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"containerStayConnect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"checkBox\",\n    onClick: () => {\n      setValid(!valid);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, valid === true && React.createElement(\"img\", {\n    className: \"cochCheck\",\n    src: require(\"../image/valid.png\"),\n    alt: \"valid icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    className: \"textStayConnect\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"rester connecter\")), React.createElement(\"button\", {\n    onClick: validSub,\n    className: \"validLog\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Continuer\"));\n};\n\nexport default Connexion;","map":{"version":3,"sources":["/home/thomas/navebe/front/src/components/registration/connexion/Connexion.js"],"names":["React","useState","url","Redirect","Connexion","mail","setMail","password","setPassword","alert","setAlert","valid","setValid","redirect","setRedirect","validSub","response","fetch","method","body","JSON","stringify","email","headers","result","json","console","log","status","localStorage","setItem","data","id","token","setTimeout","document","location","reload","sessionStorage","takeMail","e","target","value","takePassword","require"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport url from '../../../api/url'\nimport {Redirect} from 'react-router-dom'\nimport './Connexion.scss'\n\nconst Connexion = () => {\n    const [mail, setMail] = useState('')\n    const [password, setPassword] = useState('')\n    const [alert, setAlert] = useState('')\n    const [valid, setValid] = useState(false)\n    const [redirect, setRedirect] = useState(false)\n\n\n    const validSub = async () => {\n            // Envoi de la requête\n            const response = await fetch(`${url}/user/connect`, {\n              method: 'POST',\n              body: JSON.stringify({\n                  email: mail,\n                  password: password\n              }),\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            });\n            // Récupération du status de la requête\n            const result = await response.json();\n            console.log(result)\n\n            if(result.status === 200){\n                if(valid === true){\n                    localStorage.setItem(\"userId\", result.data.id)\n                    localStorage.setItem('token', result.token)\n                    setRedirect(true)\n                    setTimeout(() => {\n                        document.location.reload()\n                    }, 100)\n                } else if(valid === false){\n                    sessionStorage.setItem(\"userId\", result.data.id)\n                    sessionStorage.setItem('token', result.token)\n                    setRedirect(true)\n                }\n            } else{\n                setAlert(\"email ou mot de passe incorrect\")\n                setTimeout(() => {\n                    setAlert('')\n                }, 2000);\n            }\n}\n\n\n    const takeMail = (e) => {\n        setMail(e.target.value)\n    }\n\n    const takePassword = (e) => {\n        setPassword(e.target.value)\n    }\n    \n\n    return(\n        <div className=\"containerRegistration\">\n            {redirect === true && <Redirect to=\"/models\"/>}\n            <h4 className=\"titleRegister\">Connexion</h4>\n            {alert &&\n            <div className=\"contentAlert\">\n                <p className=\"textAlert\">{alert}</p>\n            </div>}\n            <form className=\"subForm\" onSubmit={validSub}>\n                <input onChange={takeMail} className={alert === \"veuillez entrer une email correct\" ? \"inputLogError\" : \"inputLog\"} placeholder=\"email\"/>\n                <input type=\"password\" onChange={takePassword} className={alert === \"veuillez entrer une email correct\" || alert === \"\" ? \"inputLog\" : \"inputLogError\"}  placeholder=\"mot de passe\"/>\n            </form>\n            <div className=\"containerStayConnect\">\n                <div className=\"checkBox\" onClick={() => {setValid(!valid)}}>\n                    {valid === true &&\n                    <img className=\"cochCheck\" src={require(\"../image/valid.png\")} alt=\"valid icon\"/>}\n                </div>\n                <p className=\"textStayConnect\">rester connecter</p>\n            </div>\n            <button onClick={validSub} className=\"validLog\">Continuer</button>\n        </div>\n    )\n}\n\nexport default Connexion"]},"metadata":{},"sourceType":"module"}